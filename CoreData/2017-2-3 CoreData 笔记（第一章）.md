---  
layout: post
title: "CoreData 笔记（第一章）"
description: ""
category: ios
tags: [CoreData]
author: 饭小团
---   

#CoreData 笔记（第一章）  
###第一章  
1. Core Data 是个框架，它使得开发者可以把数据当做对象来操作，而不必在乎数据在磁盘中的存储方式。  
2. Core Data所提供的数据对象叫托管对象（managed object），而CoreData本身则位于你的应用程序和持久化存储区（persistent store）之间。  
3. Core Data 使用托管对象模型来把数据从托管对象映射到持久化存储区中，开发者可以通过对象图（object graph）来配置应用程序的数据结构。  
4. 托管对象持有一份对持久化存储区里的相关数据的拷贝。如果用数据库，那么托管对象可以当做数据表的一行。如果用XML持久化，那么托管对象1可认为是某个数据元素。
5. 所有托管对象都必须位于托管对象上下文里（managed object context）,而托管对象上下文位于RAM里。我的理解，托管对象上下文是个存储的操作环境，数据先存储在内存里。save之后才会写入磁盘。由于读内存比读磁盘快得多，所以读写数据大多会在内存中操作。只有当save之后数据才会进入磁盘。这样适时的操作内存和磁盘是提高性能的手段之一。  

![](https://www.objccn.io/images/issues/issue-4/stack-complex.png)

####1.1.1  
####持久化存储协调器  
持久化存储协调器（persistent store coordinator）包含一份持久化存储区，存储区里又含有数据表里的若干行数据。  

####1.1.2  
####托管对象模型  
位于持久化存储协调器和托管对象上下文之间。顾名思义，托管对象模型是描述数据结构的模型或图示（graphical representation）。它与数据库模式相似，有时也叫对象图。  

####1.1.3  
####托管对象上下文  
托管对象上下文负责管理对象的生命周期，并且还提供许多强大功能，如faulting，变更追踪，验证等。  
faulting就是用户从磁盘取数据时，只会把需要的一部分数据取出来。而userdefault每次都会把所有数据读到内存，操作完，再写回去。  
变更就是支持撤销和重做。  
验证机制用来确保托管对象的规则，比如某个实体的属性的限制的最大最小值。  


